<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>celery</title>
      <link href="/2020/03/08/celery/"/>
      <url>/2020/03/08/celery/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>from celery import celery<br>配置celery可能加载到的项目的包</p><p>import os<br>os.environ.setdefault()</p><p>创建celery实例</p><p>配置消息队列 </p><p><img src="https://note.youdao.com/yws/res/712/WEBRESOURCE0ddba9af1958177fd2294645eb18e363" alt="image.png"></p><p>生产者:<br>tasks.py里面写任务</p><p><img src="https://note.youdao.com/yws/res/717/WEBRESOURCE289cdc3fd5b4ef9e4ee04280070ebd03" alt="image.png"></p><p>自动注册celery</p><p><img src="https://note.youdao.com/yws/res/720/WEBRESOURCE2f515701049b48d80544b3210e938ce6" alt="image.png"></p><p>消费者:</p><p><img src="https://note.youdao.com/yws/res/723/WEBRESOURCE0a60533ebd033b039ed0e0d1f115a044" alt="image.png"></p><p><img src="https://note.youdao.com/yws/res/726/WEBRESOURCEd6d293fbe52b60107915ba72f7d24332" alt="image.png"></p><p>nginx ../sbin/nginx -g ../conf/nginx/conf   -g 检测nginx配置文件</p><p>lsof -i :80<br>netstat -ntpl</p><p>netstat命令各个参数说明如下：</p><p>-a   或–all                             显示所有连线中的Socket。<br>-A                                       &lt;网络类型&gt;或–&lt;网络类型&gt; 列出该网络类型连线中的相关地址。<br>-c   或–continuous               持续列出网络状态。<br>-C 或–cache                       显示路由器配置的快取信息。<br>-e  或–extend                     显示网络其他相关信息。<br>-F  或 –fib                          显示FIB。<br>-g  或–groups                     显示多重广播功能群组组员名单。<br>-h  或–help                        在线帮助。<br>-i   或–interfaces                 显示网络界面信息表单。<br>-l  或–listening                    显示监控中的服务器的Socket。<br>-M   或–masquerade           显示伪装的网络连线。<br>-n  或–numeric                   直接使用IP地址，而不通过域名服务器。<br>-N   或–netlink或–symbolic  显示网络硬件外围设备的符号连接名称。<br>-o  或–timers                      显示计时器。<br>-p   或–programs                显示正在使用Socket的程序识别码和程序名称。<br>-r  或–route                        显示 Routing Table。<br>-s  或–statistice 显示网络工作信息统计表。<br>-t  或–tcp 显示TCP 传输协议的连线状况。<br>-u或–udp 显示UDP传输协议的连线状况。<br>-v或–verbose 显示指令执行过程。<br>-V 或–version 显示版本信息。<br>-w或–raw 显示RAW传输协议的连线状况。<br>-x或–unix 此参数的效果和指定”-A unix”参数相同。<br>–ip或–inet 此参数的效果和指定”-A inet”参数相同。</p><p>killall -s HUP nginx   重读配置文件</p><p>htpasswd -c或/m /etc/nginx/htpasswd sky  密码加密</p><p>一个web服务器默认只能发布一个web</p><p>nginx虚拟主机:一个web服务器发布多个网站</p><p>基于ip</p><pre><code>两个IPDR存在索引页 index.html</code></pre><p><img src="https://note.youdao.com/yws/res/751/WEBRESOURCE4da7ddec74f8eab3a1f8e86af5d7846e" alt="image.png"></p><p>基于端口:端口无法告诉公网用户,适用于内部用户</p><p><img src="https://note.youdao.com/yws/res/763/WEBRESOURCEe0181be8ed4983060af5c21c96d56f02" alt="image.png"></p><p>基于域名</p><p><img src="https://note.youdao.com/yws/res/769/WEBRESOURCEa4de55252faba816505b552ab3619961" alt="image.png"></p><p>反向代理:</p><p><img src="https://note.youdao.com/yws/res/785/WEBRESOURCE742abc3a74f0986fcc63678afbac42fa" alt="image.png"></p><p>堡垒机:保证数据安全</p><p>发布内网服务器</p><p><img src="https://note.youdao.com/yws/res/777/WEBRESOURCE3c318d460aaf0c16e23011db5502042a" alt="image.png"></p><p>缓存场景</p><p><img src="https://note.youdao.com/yws/res/780/WEBRESOURCE1926855e30473999ec0baaa1942324ce" alt="image.png"></p><p>反向代理 优化:</p><p><img src="https://note.youdao.com/yws/res/787/WEBRESOURCEb1f543460e59cecd67a341d1df992c2c" alt="image.png"></p><p>nginx 限速:</p><p><img src="https://note.youdao.com/yws/res/791/WEBRESOURCE71c7ddec884045dae385df20fa5cda4a" alt="image.png"></p><p>应用场景:<br>DDOS 下载场景保护IO</p><p>原理:</p><p><img src="https://note.youdao.com/yws/res/796/WEBRESOURCE1443f2cc59cb9a96c12ed9ce0d122e84" alt="image.png"></p><p>实现原理:</p><p><img src="https://note.youdao.com/yws/res/798/WEBRESOURCE24d10db8e872f3e1f08773cc1604bf1b" alt="image.png"></p><p><img src="https://note.youdao.com/yws/res/800/WEBRESOURCE24b4d1b21e26e8fe39701a163c40622c" alt="image.png"></p><p>nginx URL 重写</p><p><img src="https://note.youdao.com/yws/res/803/WEBRESOURCE3530baad37324155fa8b47fca6a64cec" alt="image.png"></p><p>应用场景:</p><p><img src="https://note.youdao.com/yws/res/805/WEBRESOURCE7f88320a1535fc3d8e31b5069ea5b7d3" alt="image.png"></p><p>URL重写原理</p><p><img src="https://note.youdao.com/yws/res/807/WEBRESOURCEf4882c9fb76b91d08da38cfc77572e05" alt="image.png"></p><p>URL语法</p><p><img src="https://note.youdao.com/yws/res/810/WEBRESOURCE725f4ab5b6c3c6c4dff9fad2c708ff0f" alt="image.png"></p><p><img src="https://note.youdao.com/yws/res/813/WEBRESOURCEdac3fc05ef9d7630bf9ff98c916434d0" alt="image.png"></p><p><img src="https://note.youdao.com/yws/res/815/WEBRESOURCEbc5bfe53943e97f76691c14fbe4defe9" alt="image.png"></p><p>NGinx 优化</p><p><img src="https://note.youdao.com/yws/res/820/AA0A9BA66DCE4A889D510136CC588C1A" alt="image"></p><p>查看CPU核心数量</p><p><img src="https://note.youdao.com/yws/res/822/8D2E8BBDF5BF4F1E9DE087A8585A9729" alt="image"></p><p>查看每个核心上的NGINX</p><p><img src="https://note.youdao.com/yws/res/824/A86856BA7B7A4550A8B24FCECF65B15F" alt="image"></p><p>NGinx当前连接个数</p><p><img src="https://note.youdao.com/yws/res/827/FD4BE501E3D741A6A01E6FBBB0548070" alt="image"></p><p><img src="https://note.youdao.com/yws/res/829/84A8F4033A6B40B7B2F6B56337D8E1E6" alt="image"><br>减少三次握手和4次断开</p><p>压缩</p><p><img src="https://note.youdao.com/yws/res/833/628B321ACCDB4F759F88744D4FD15D0A" alt="image"></p><p><img src="https://note.youdao.com/yws/res/835/B5F48F2456C246D8921D962F9777E57D" alt="image"></p><p>NGinx 缓存</p><p><img src="https://note.youdao.com/yws/res/838/74559AD89853455E8C994A568895B794" alt="image"></p><p>NGinx集群<br><img src="https://note.youdao.com/yws/res/840/DE7008793E6D4B138F89B910582E5EEF" alt="image"></p><p><img src="http://note.youdao.com/yws/res/866/WEBRESOURCEb8a7c6a970f56f4c11fb02727f17d8ad" alt="image.png"></p><p><img src="http://note.youdao.com/yws/res/868/WEBRESOURCE467e6e069db7515bbe21a716178fb8bd" alt="image.png"></p><p><img src="http://note.youdao.com/yws/res/873/WEBRESOURCE8a526c0e4f5f1985225095e286581576" alt="image.png"></p><p><img src="http://note.youdao.com/yws/res/876/WEBRESOURCE3028b2abab05db4d75b03a843e8f3433" alt="image.png"></p><p><img src="http://note.youdao.com/yws/res/878/WEBRESOURCE707ab8df5528f366f7c45f4d841770b5" alt="image.png"></p><p>nginx 分发算法</p><p><img src="http://note.youdao.com/yws/res/881/WEBRESOURCE4eb206c372f9b092d1b092d765c120ba" alt="image.png"></p><p>uwsgi 启动</p><p><img src="http://note.youdao.com/yws/res/885/WEBRESOURCEc8488a9bc8fe26d6ff97b6de1a023af7" alt="image.png"></p><p><img src="http://note.youdao.com/yws/res/887/WEBRESOURCEe521688558228827303f58ef183ee8eb" alt="image.png"></p><p>cookie<br> response.set_cookie(k,v,max_age)<br> response.delete_cookie(k)<br> request.COOKIES  ==&gt;dict</p><p> request.session[‘name’]=’itheima’</p><p> 函数  request.session.set_expiry(3600)</p><p> 默认过期时间14天</p><p> 读取 requset.session[‘itcast’]</p><p> del request.session[‘name’]</p><p> 清空所有key<br> request.session,clear()</p><p> hash </p><p> <img src="http://note.youdao.com/yws/res/897/WEBRESOURCE1927801eab159afc7635519eca0ca776" alt="image.png"></p><p> hset<br> hdel<br> hset<br> hgetall</p><p> 页面静态化</p><p> index.html+io操作===render()===index.html</p><p> <img src="http://note.youdao.com/yws/res/901/WEBRESOURCEf02ad4fd8ca8357ee88d0f038ec7e6cc" alt="image.png"></p><p> <img src="http://note.youdao.com/yws/res/904/WEBRESOURCE75766c9179c87e242562023946034b28" alt="image.png"></p><p> 定时任务</p><p> crontab</p><p> 安装  注册<br> <img src="http://note.youdao.com/yws/res/909/WEBRESOURCEa979c6cae3eb65e8f76fa6eda2192644" alt="image.png"></p><p> <img src="http://note.youdao.com/yws/res/911/WEBRESOURCE90cc452f2cbbf87ae50fe75e8dbc44f7" alt="image.png"></p><p> <img src="http://note.youdao.com/yws/res/913/WEBRESOURCE6e14383e194677a7aa3019d38da90a81" alt="image.png"></p><p> 同源策略</p><p> <img src="http://note.youdao.com/yws/res/927/WEBRESOURCEa5b50f1454383da5bab16b46dce2125e" alt="image.png"></p><p> cors</p><p> <img src="http://note.youdao.com/yws/res/929/WEBRESOURCE0ace6ba70d27fb0f639e968ab0b8929a" alt="image.png"></p><p> <img src="http://note.youdao.com/yws/res/931/WEBRESOURCE2000621b032a04fee9c92dd58ba3dbd1" alt="image.png"></p><p> 1000以内除了自己本身,其余约数的和是他本身的数 python</p><p> import math</p><p>def main():<br>    for num in range(1, 1001):<br>        sum = 0<br>        for factor in range(1, int(math.sqrt(num)) + 1):<br>            if num % factor == 0:<br>                sum += factor<br>                if factor &gt; 1 and num / factor != factor:<br>                    sum += num / factor<br>        if sum == num:<br>            print(num)</p><p>if <strong>name</strong> == ‘<strong>main</strong>‘:<br>    main()</p><p>JWT</p><p>第一部分我们称它为头部（header),第二部分我们称其为载荷（payload, 类似于飞机上承载的物品)，第三部分是签证（signature).</p><p><img src="http://note.youdao.com/yws/res/942/WEBRESOURCE660e597da41a9beb3f61c780c328f4a2" alt="image.png"></p><p>fastdfs<br><img src="http://note.youdao.com/yws/res/944/WEBRESOURCEdc2dec4164f574e2eb226d0601d82f4a" alt="image.png"></p><p><img src="http://note.youdao.com/yws/res/946/WEBRESOURCEa66487dd40e2f8265885810ff0c34683" alt="image.png"></p><p>Elasticsearch、</p><p><img src="http://note.youdao.com/yws/res/952/WEBRESOURCEac77da026b0647570036b47f32ab704b" alt="image.png"></p><p><strong>搜索引擎原理 = 倒排索引 + 分析 + 相关性排序</strong></p><p><img src="http://note.youdao.com/yws/res/955/WEBRESOURCEcb2178946d34b3e8174ed3b91061bf17" alt="image.png"></p><p>Docker、</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2020/03/08/hello-world/"/>
      <url>/2020/03/08/hello-world/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><a id="more"></a><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>{% aplayer "Paper Crown" "Alec Benjamin" "http://antiserver.kuwo.cn/anti.s?useless=/resource/&amp;format=mp3&amp;rid=MUSIC_11457243&amp;response=res&amp;type=convert_url&amp;"  "https://p3fx.kgimg.com/stdmusic/20150717/20150717220246730499.jpg"%}<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
